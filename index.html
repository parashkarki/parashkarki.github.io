<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computer Science Master Quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --success: #4CAF50;
            --danger: #F44336;
            --warning: #FF9800;
            --info: #2196F3;
            --dark: #333;
            --light: #f8f9fa;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            min-height: 100vh;
            padding: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .screen.active {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
        }

        .app-logo {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #ffcc00;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
            animation: pulse 2s infinite;
        }

        .app-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .app-subtitle {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .btn {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            margin: 10px 0;
            width: 100%;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(to right, #4776E6, #8E54E9);
        }

        .btn-success {
            background: linear-gradient(to right, var(--success), #2E7D32);
        }

        /* Categories Screen */
        .categories-container {
            width: 100%;
            margin-top: 20px;
        }

        .category-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .category-card:hover {
            transform: scale(1.03);
            background: rgba(255, 255, 255, 0.2);
        }

        .category-icon {
            font-size: 2rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
        }

        .category-info {
            flex: 1;
        }

        .category-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .category-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Subcategories Screen */
        .subcategories-container {
            width: 100%;
            margin-top: 20px;
        }

        .subcategory-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .subcategory-card:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .subcategory-name {
            font-size: 1.1rem;
            font-weight: 500;
        }

        .question-count {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Quiz Screen */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, #ffcc00, #ff9900);
            border-radius: 4px;
            transition: width 0.5s;
        }

        .question-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            width: 100%;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .question-number {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.4rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }

        .option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .option.selected {
            background: rgba(255, 204, 0, 0.3);
            border-color: #ffcc00;
        }

        .option.correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4CAF50;
        }

        .option.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: #F44336;
        }

        .option-feedback {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.2rem;
            opacity: 0;
            transform: scale(0);
            transition: opacity 0.3s, transform 0.3s;
        }

        .option.correct .option-feedback {
            opacity: 1;
            transform: scale(1);
            color: #4CAF50;
        }

        .option.incorrect .option-feedback {
            opacity: 1;
            transform: scale(1);
            color: #F44336;
        }

        .fill-blank-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }

        .fill-blank-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            margin-top: 10px;
        }

        .fill-blank-input:focus {
            outline: none;
            border-color: #ffcc00;
        }

        /* Results Screen */
        .results-container {
            text-align: center;
            width: 100%;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(#4CAF50 0deg, #4CAF50 var(--deg), rgba(255, 255, 255, 0.1) var(--deg));
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }

        .score-inner {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .score-value {
            font-size: 3rem;
            font-weight: 700;
        }

        .score-text {
            font-size: 1.2rem;
            margin-top: 10px;
        }

        .results-details {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .bounce {
            animation: bounce 1s;
        }

        .fade-in {
            animation: fadeIn 0.5s;
        }

        .correct-animation {
            animation: correctAnswer 0.5s;
        }

        .incorrect-animation {
            animation: incorrectAnswer 0.5s;
        }

        /* Footer */
        .footer {
            margin-top: auto;
            text-align: center;
            padding: 20px 0;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Responsive adjustments */
        @media (max-width: 400px) {
            .question-text {
                font-size: 1.2rem;
            }
            
            .score-circle {
                width: 150px;
                height: 150px;
            }
            
            .score-inner {
                width: 120px;
                height: 120px;
            }
            
            .score-value {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div class="screen welcome-screen active" id="welcome-screen">
            <div class="app-logo">
                <i class="fas fa-laptop-code"></i>
            </div>
            <h1 class="app-title">CS Master Quiz</h1>
            <p class="app-subtitle">Test your computer science knowledge with our comprehensive quiz platform</p>
            <button class="btn" id="start-btn">
                <i class="fas fa-play"></i> Start Quiz
            </button>
            <button class="btn btn-secondary" id="categories-btn">
                <i class="fas fa-layer-group"></i> Categories
            </button>
        </div>

        <!-- Categories Screen -->
        <div class="screen" id="categories-screen">
            <h1 class="app-title">Categories</h1>
            <p class="app-subtitle">Choose your computer science topic</p>
            <div class="categories-container" id="categories-container">
                <!-- Categories will be dynamically added here -->
            </div>
            <button class="btn btn-secondary" id="back-from-categories">
                <i class="fas fa-arrow-left"></i> Back
            </button>
        </div>

        <!-- Subcategories Screen -->
        <div class="screen" id="subcategories-screen">
            <h1 class="app-title" id="subcategories-title">Subcategories</h1>
            <p class="app-subtitle" id="subcategories-subtitle">Choose a specific topic</p>
            <div class="subcategories-container" id="subcategories-container">
                <!-- Subcategories will be dynamically added here -->
            </div>
            <button class="btn btn-secondary" id="back-from-subcategories">
                <i class="fas fa-arrow-left"></i> Back
            </button>
        </div>

        <!-- Quiz Screen -->
        <div class="screen" id="quiz-screen">
            <div class="quiz-header">
                <div class="timer">
                    <i class="fas fa-clock"></i> <span id="time">60</span>s
                </div>
                <div class="score">
                    <i class="fas fa-star"></i> <span id="current-score">0</span>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number">Question <span id="current-question">1</span> of <span id="total-questions">10</span></div>
                <h2 class="question-text" id="question-text">What is the capital of France?</h2>
                
                <div class="options-container" id="options-container">
                    <!-- Options will be dynamically added here -->
                </div>

                <div class="fill-blank-container" id="fill-blank-container" style="display: none;">
                    <p>Enter your answer:</p>
                    <input type="text" class="fill-blank-input" id="fill-blank-input" placeholder="Type your answer here...">
                </div>
            </div>
            
            <button class="btn" id="next-btn" disabled>
                <i class="fas fa-arrow-right"></i> Next Question
            </button>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="results-screen">
            <h1 class="app-title">Quiz Complete!</h1>
            <p class="app-subtitle">Here's how you performed</p>
            
            <div class="score-circle" id="score-circle">
                <div class="score-inner">
                    <div class="score-value" id="final-score">0%</div>
                    <div class="score-text">Score</div>
                </div>
            </div>
            
            <div class="results-details">
                <div class="result-item">
                    <span>Correct Answers:</span>
                    <span id="correct-answers">0/10</span>
                </div>
                <div class="result-item">
                    <span>Time Taken:</span>
                    <span id="time-taken">0s</span>
                </div>
                <div class="result-item">
                    <span>Category:</span>
                    <span id="quiz-category">General</span>
                </div>
                <div class="result-item">
                    <span>Rank:</span>
                    <span id="rank">Novice</span>
                </div>
            </div>
            
            <button class="btn" id="restart-btn">
                <i class="fas fa-redo"></i> Play Again
            </button>
            <button class="btn btn-secondary" id="home-btn">
                <i class="fas fa-home"></i> Back to Home
            </button>
        </div>

        <div class="footer">
            <p> Quiz with Parash &copy; 2023 | Test Your Computer Science Knowledge</p>
        </div>
    </div>

    <script>
        // Quiz data structure
        const quizData = {
            "Computer": {
                icon: "fas fa-desktop",
                description: "Fundamentals of computing systems",
                subcategories: {
                    "History of Computers": {
                        questions: [
                            {
                                type: "mcq",
                                question: "Who is considered the 'Father of Computers'?",
                                options: ["Alan Turing", "Charles Babbage", "John von Neumann", "Steve Jobs"],
                                correct: 2
                            },
                            {
                                type: "mcq",
                                question: "Which was the first electronic general-purpose computer?",
                                options: ["ENIAC", "UNIVAC", "ABC", "Harvard Mark I"],
                                correct: 1
                            },
                            {
                                type: "fill",
                                question: "The first computer bug was an actual ______ found in the Harvard Mark II computer.",
                                answer: "moth"
                            },
                            {
                                type: "mcq",
                                question: "Which generation of computers used vacuum tubes?",
                                options: ["First Generation", "Second Generation", "Third Generation", "Fourth Generation"],
                                correct: 1
                            },
                            {
                                type: "fill",
                                question: "The ______ was the first mass-produced computer by IBM.",
                                answer: "IBM 650"
                            },
                            {
                                type: "mcq",
                                question: "What technology replaced vacuum tubes in second generation computers?",
                                options: ["Integrated Circuits", "Transistors", "Microprocessors", "Artificial Intelligence"],
                                correct: 2
                            }
                        ]
                    },
                    "Characteristics of Computers": {
                        questions: [
                            {
                                type: "mcq",
                                question: "What is the term for raw facts and figures?",
                                options: ["Information", "Data", "Knowledge", "Wisdom"],
                                correct: 2
                            },
                            {
                                type: "fill",
                                question: "The brain of the computer is called the ______.",
                                answer: "CPU"
                            },
                            {
                                type: "mcq",
                                question: "Which of these is NOT a type of computer malware?",
                                options: ["Virus", "Worm", "Trojan", "Firewall"],
                                correct: 4
                            },
                            {
                                type: "mcq",
                                question: "What does RAM stand for?",
                                options: ["Random Access Memory", "Read Access Memory", "Rapid Access Memory", "Random Allocation Memory"],
                                correct: 1
                            },
                            {
                                type: "fill",
                                question: "The fear of being without a mobile phone is called ______.",
                                answer: "nomophobia"
                            },
                            {
                                type: "mcq",
                                question: "Which number system do computers use internally?",
                                options: ["Decimal", "Binary", "Hexadecimal", "Octal"],
                                correct: 2
                            }
                        ]
                    },
                    "Types of Computers": {
                        questions: [
                            {
                                type: "mcq",
                                question: "Which type of computer is designed for general use by a single person?",
                                options: ["Mainframe", "Server", "Personal Computer", "Supercomputer"],
                                correct: 3
                            },
                            {
                                type: "fill",
                                question: "A ______ is a portable computer that is smaller than a traditional laptop.",
                                answer: "tablet"
                            },
                            {
                                type: "mcq",
                                question: "Which computer is optimized to provide services to other computers over a network?",
                                options: ["Workstation", "Server", "Mainframe", "Supercomputer"],
                                correct: 2
                            },
                            {
                                type: "mcq",
                                question: "What type of computer would NASA use for space exploration research?",
                                options: ["Personal Computer", "Server", "Supercomputer", "Workstation"],
                                correct: 3
                            },
                            {
                                type: "fill",
                                question: "The latest trend in computing is ______ computers integrated into watches and clothing.",
                                answer: "wearable"
                            },
                            {
                                type: "mcq",
                                question: "Which of these is a specialized computer for playing video games on a TV?",
                                options: ["Game Console", "Workstation", "Server", "Mainframe"],
                                correct: 1
                            }
                        ]
                    },
                    "Computer Organization": {
                        questions: [
                            {
                                type: "mcq",
                                question: "What is the purpose of a file allocation table (FAT)?",
                                options: ["To allocate memory to programs", "To locate files on a disk", "To manage CPU processes", "To organize network connections"],
                                correct: 2
                            },
                            {
                                type: "fill",
                                question: "A ______ is an input device that converts physical documents into digital format.",
                                answer: "scanner"
                            },
                            {
                                type: "mcq",
                                question: "Which type of memory is volatile?",
                                options: ["ROM", "RAM", "Hard Disk", "Flash Drive"],
                                correct: 2
                            },
                            {
                                type: "mcq",
                                question: "What does OMR stand for?",
                                options: ["Optical Mark Reader", "Optical Memory Reader", "Online Mark Recognition", "Optical Media Reader"],
                                correct: 1
                            },
                            {
                                type: "fill",
                                question: "The ______ is the main circuit board in a computer that connects all components.",
                                answer: "motherboard"
                            },
                            {
                                type: "mcq",
                                question: "Which storage device has no moving parts?",
                                options: ["HDD", "Floppy Disk", "SSD", "Magnetic Tape"],
                                correct: 3
                            }
                        ]
                    },
                    "Computer Processing": {
                        questions: [
                            {
                                type: "mcq",
                                question: "What is the first step in the CPU instruction cycle?",
                                options: ["Decode", "Execute", "Fetch", "Store"],
                                correct: 3
                            },
                            {
                                type: "fill",
                                question: "The ______ carries data between the CPU and memory.",
                                answer: "data bus"
                            },
                            {
                                type: "mcq",
                                question: "Which component performs arithmetic and logical operations in the CPU?",
                                options: ["Control Unit", "ALU", "Registers", "Cache"],
                                correct: 2
                            },
                            {
                                type: "mcq",
                                question: "What does GPU stand for?",
                                options: ["General Processing Unit", "Graphics Processing Unit", "Global Processing Unit", "Graphical Performance Unit"],
                                correct: 2
                            },
                            {
                                type: "fill",
                                question: "______ is a technique where multiple instructions are overlapped in execution.",
                                answer: "Pipelining"
                            },
                            {
                                type: "mcq",
                                question: "Which factor does NOT contribute to a computer's speed?",
                                options: ["CPU Clock Speed", "Number of Cores", "Monitor Size", "RAM Size"],
                                correct: 3
                            }
                        ]
                    },
                    "Operating Systems": {
                        questions: [
                            {
                                type: "mcq",
                                question: "What is the core of an operating system called?",
                                options: ["Shell", "Kernel", "Interface", "Desktop"],
                                correct: 2
                            },
                            {
                                type: "fill",
                                question: "______ is when a computer spends most of its time swapping data between memory and disk.",
                                answer: "Thrashing"
                            },
                            {
                                type: "mcq",
                                question: "Which of these is NOT a function of an operating system?",
                                options: ["Memory Management", "File Management", "Processor Management", "Application Development"],
                                correct: 4
                            },
                            {
                                type: "mcq",
                                question: "What type of user interface uses icons and visual indicators?",
                                options: ["CLI", "GUI", "TUI", "VUI"],
                                correct: 2
                            },
                            {
                                type: "fill",
                                question: "The process of starting a computer is called ______.",
                                answer: "booting"
                            },
                            {
                                type: "mcq",
                                question: "Which file system is used by modern Windows versions?",
                                options: ["FAT32", "NTFS", "EXT4", "HFS+"],
                                correct: 2
                            }
                        ]
                    },
                    "Internet and Networking": {
                        questions: [
                            {
                                type: "mcq",
                                question: "What does LAN stand for?",
                                options: ["Local Area Network", "Large Access Network", "Linked Area Nodes", "Local Access Nodes"],
                                correct: 1
                            },
                            {
                                type: "fill",
                                question: "The protocol that converts IP addresses to domain names is called ______.",
                                answer: "DNS"
                            },
                            {
                                type: "mcq",
                                question: "Which device connects multiple networks together?",
                                options: ["Hub", "Switch", "Router", "Modem"],
                                correct: 3
                            },
                            {
                                type: "mcq",
                                question: "What is the worldwide standard protocol for Internet communication?",
                                options: ["HTTP", "FTP", "TCP/IP", "SMTP"],
                                correct: 3
                            },
                            {
                                type: "fill",
                                question: "A private network within an organization is called an ______.",
                                answer: "intranet"
                            },
                            {
                                type: "mcq",
                                question: "Which topology connects all devices to a central hub?",
                                options: ["Bus", "Ring", "Star", "Mesh"],
                                correct: 3
                            }
                        ]
                    }
                }
            }
        };

        // App state
        let currentScreen = 'welcome-screen';
        let currentCategory = '';
        let currentSubcategory = '';
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 60;
        let selectedOption = null;
        let quizStartTime;
        let userAnswer = '';

        // DOM elements
        const screens = document.querySelectorAll('.screen');
        const startBtn = document.getElementById('start-btn');
        const categoriesBtn = document.getElementById('categories-btn');
        const backFromCategoriesBtn = document.getElementById('back-from-categories');
        const backFromSubcategoriesBtn = document.getElementById('back-from-subcategories');
        const categoriesContainer = document.getElementById('categories-container');
        const subcategoriesContainer = document.getElementById('subcategories-container');
        const subcategoriesTitle = document.getElementById('subcategories-title');
        const subcategoriesSubtitle = document.getElementById('subcategories-subtitle');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const homeBtn = document.getElementById('home-btn');
        const timeDisplay = document.getElementById('time');
        const currentScoreDisplay = document.getElementById('current-score');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionDisplay = document.getElementById('current-question');
        const totalQuestionsDisplay = document.getElementById('total-questions');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const fillBlankContainer = document.getElementById('fill-blank-container');
        const fillBlankInput = document.getElementById('fill-blank-input');
        const finalScoreDisplay = document.getElementById('final-score');
        const correctAnswersDisplay = document.getElementById('correct-answers');
        const timeTakenDisplay = document.getElementById('time-taken');
        const quizCategoryDisplay = document.getElementById('quiz-category');
        const rankDisplay = document.getElementById('rank');
        const scoreCircle = document.getElementById('score-circle');

        // Event listeners
        startBtn.addEventListener('click', () => {
            showScreen('categories-screen');
            loadCategories();
        });

        categoriesBtn.addEventListener('click', () => {
            showScreen('categories-screen');
            loadCategories();
        });

        backFromCategoriesBtn.addEventListener('click', () => {
            showScreen('welcome-screen');
        });

        backFromSubcategoriesBtn.addEventListener('click', () => {
            showScreen('categories-screen');
        });

        nextBtn.addEventListener('click', nextQuestion);

        restartBtn.addEventListener('click', () => {
            showScreen('categories-screen');
            loadCategories();
        });

        homeBtn.addEventListener('click', () => {
            showScreen('welcome-screen');
        });

        fillBlankInput.addEventListener('input', (e) => {
            userAnswer = e.target.value.trim().toLowerCase();
            nextBtn.disabled = userAnswer === '';
        });

        // Functions
        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            currentScreen = screenId;
        }

        function loadCategories() {
            categoriesContainer.innerHTML = '';
            
            for (const category in quizData) {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <div class="category-icon">
                        <i class="${quizData[category].icon}"></i>
                    </div>
                    <div class="category-info">
                        <div class="category-name">${category}</div>
                        <div class="category-desc">${quizData[category].description}</div>
                    </div>
                    <i class="fas fa-chevron-right"></i>
                `;
                
                categoryCard.addEventListener('click', () => {
                    currentCategory = category;
                    loadSubcategories(category);
                });
                
                categoriesContainer.appendChild(categoryCard);
            }
        }

        function loadSubcategories(category) {
            subcategoriesTitle.textContent = category;
            subcategoriesSubtitle.textContent = quizData[category].description;
            subcategoriesContainer.innerHTML = '';
            
            for (const subcategory in quizData[category].subcategories) {
                const questionCount = quizData[category].subcategories[subcategory].questions.length;
                const subcategoryCard = document.createElement('div');
                subcategoryCard.className = 'subcategory-card';
                subcategoryCard.innerHTML = `
                    <div class="subcategory-name">${subcategory}</div>
                    <div class="question-count">${questionCount} questions</div>
                `;
                
                subcategoryCard.addEventListener('click', () => {
                    currentSubcategory = subcategory;
                    showScreen('quiz-screen');
                    startQuiz();
                });
                
                subcategoriesContainer.appendChild(subcategoryCard);
            }
            
            showScreen('subcategories-screen');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            timeLeft = 60;
            selectedOption = null;
            userAnswer = '';
            quizStartTime = new Date();
            
            currentScoreDisplay.textContent = score;
            timeDisplay.textContent = timeLeft;
            nextBtn.disabled = true;
            
            startTimer();
            loadQuestion();
        }

        function startTimer() {
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                timeDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endQuiz();
                }
            }, 1000);
        }

        function loadQuestion() {
            const questions = quizData[currentCategory].subcategories[currentSubcategory].questions;
            const question = questions[currentQuestionIndex];
            
            currentQuestionDisplay.textContent = currentQuestionIndex + 1;
            totalQuestionsDisplay.textContent = questions.length;
            questionText.textContent = question.question;
            
            // Update progress bar
            const progress = ((currentQuestionIndex) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            // Clear options and reset UI
            optionsContainer.innerHTML = '';
            fillBlankContainer.style.display = 'none';
            fillBlankInput.value = '';
            userAnswer = '';
            
            // Show appropriate question type
            if (question.type === 'mcq') {
                // Add options for MCQ
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.innerHTML = `
                        ${option}
                        <div class="option-feedback">
                            <i class="fas fa-check"></i>
                        </div>
                    `;
                    
                    optionElement.addEventListener('click', () => selectOption(optionElement, index + 1));
                    
                    optionsContainer.appendChild(optionElement);
                });
            } else if (question.type === 'fill') {
                // Show fill in the blank input
                fillBlankContainer.style.display = 'block';
            }
            
            // Reset next button
            nextBtn.disabled = true;
            selectedOption = null;
        }

        function selectOption(optionElement, optionIndex) {
            if (selectedOption) return;
            
            selectedOption = optionIndex;
            const questions = quizData[currentCategory].subcategories[currentSubcategory].questions;
            const question = questions[currentQuestionIndex];
            
            optionElement.classList.add('selected');
            
            // Check if answer is correct
            if (selectedOption === question.correct) {
                optionElement.classList.add('correct');
                optionElement.classList.add('correct-animation');
                score += 10;
                currentScoreDisplay.textContent = score;
            } else {
                optionElement.classList.add('incorrect');
                optionElement.classList.add('incorrect-animation');
                // Highlight correct answer
                const correctOption = optionsContainer.querySelector(`[data-option="${question.correct}"]`);
                if (correctOption) {
                    correctOption.classList.add('correct');
                }
            }
            
            nextBtn.disabled = false;
        }

        function nextQuestion() {
            const questions = quizData[currentCategory].subcategories[currentSubcategory].questions;
            const question = questions[currentQuestionIndex];
            
            // Check answer for fill in the blank
            if (question.type === 'fill') {
                if (userAnswer === question.answer.toLowerCase()) {
                    score += 10;
                    currentScoreDisplay.textContent = score;
                    fillBlankContainer.classList.add('correct');
                    fillBlankContainer.classList.add('correct-animation');
                } else {
                    fillBlankContainer.classList.add('incorrect');
                    fillBlankContainer.classList.add('incorrect-animation');
                    // Show correct answer
                    setTimeout(() => {
                        fillBlankInput.value = question.answer;
                        fillBlankInput.disabled = true;
                    }, 1000);
                }
            }
            
            setTimeout(() => {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                } else {
                    endQuiz();
                }
            }, 1500);
        }

        function endQuiz() {
            clearInterval(timer);
            
            const questions = quizData[currentCategory].subcategories[currentSubcategory].questions;
            const correctCount = score / 10;
            const percentage = (correctCount / questions.length) * 100;
            const endTime = new Date();
            const timeTaken = Math.floor((endTime - quizStartTime) / 1000);
            
            // Update results screen
            finalScoreDisplay.textContent = `${Math.round(percentage)}%`;
            correctAnswersDisplay.textContent = `${correctCount}/${questions.length}`;
            timeTakenDisplay.textContent = `${timeTaken}s`;
            quizCategoryDisplay.textContent = `${currentCategory}: ${currentSubcategory}`;
            
            // Set rank based on score
            let rank = "Novice";
            if (percentage >= 90) rank = "Computer Science Master";
            else if (percentage >= 70) rank = "Expert";
            else if (percentage >= 50) rank = "Intermediate";
            rankDisplay.textContent = rank;
            
            // Update score circle
            scoreCircle.style.setProperty('--deg', `${percentage * 3.6}deg`);
            
            showScreen('results-screen');
        }
    </script>
</body>
</html>
